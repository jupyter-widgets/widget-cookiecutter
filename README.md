# widget-cookiecutter
#### A cookiecutter template for creating a custom Jupyter widget project

[![Documentation Status](https://readthedocs.org/projects/ipywidgets/badge/?version=latest)](https://ipywidgets.readthedocs.io/en/latest/?badge=latest)
[![Join the chat at https://gitter.im/jupyter-widgets/Lobby](https://badges.gitter.im/Join%20Chat.svg)](https://gitter.im/jupyter-widgets/Lobby?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge)

A [cookiecutter](https://github.com/audreyr/cookiecutter) template for a custom
Jupyter widget project.

## What is widget-cookiecutter?

With **widget-cookiecutter** you can create a custom Jupyter interactive
widget project with sensible defaults. widget-cookiecutter helps custom widget
authors get started with best practices for the packaging and distribution
of a custom Jupyter interactive widget library.

## Who uses widget-cookiecutter

Popular widget libraries such as
[bqplot](https://github.com/bloomberg/bqplot),
[pythreejs](https://github.com/jovyan/pythreejs) and
[ipyleaflet](https://github.com/ellisonbg/ipyleaflet)
 can serve as advanced examples of usage of the
Jupyter widget infrastructure.

## Usage

Install [cookiecutter](https://github.com/audreyr/cookiecutter):

    $ pip install cookiecutter

After installing cookiecutter, use the widget-cookiecutter:

    $ cookiecutter https://github.com/jupyter/widget-cookiecutter.git

As widget-cookiecutter runs, you will be asked for basic information about
your custom Jupyter widget project. You will be prompted for the following
information:

- `author_name`: your name or the name of your organization,
- `author_email`: your project's contact email,
- `github_project_name`: name of your custom Jupyter widget's GitHub repository,
- `github_organization_name`: name of your custom Jupyter widget's GitHub user or organization,
- `python_package_name`: name of the Python "back-end" package used in your custom widget.
- `npm_package_name`: name for the npm "front-end" package holding the JavaScript
  implementation used in your custom widget.
- `project_short_description` : a short description for your project that will
  be used for both the "back-end" and "front-end" packages.
  
After this, you will have a directory containing files used for creating a
custom Jupyter widget. You will now be able to easily package and distribute
your custom Jupyter widget.

## Files Generated by cookiecutter
Jupyter widgets are made of two parts:
- Python package for the code executed in kernel as the back-end of the widget
- Javascript NPM package for the front-end of the widget running in browser

cookiecutter generates source files needed for both back-end and front-end of the widget

```
├── <python_package_name>
│   ├── __init__.py
│   ├── _version.py
│   └── example.py
├── js
│   ├── lib
│   │   ├── embed.js
│   │   ├── example.js
│   │   ├── extension.js
│   │   ├── index.js
│   │   └── labplugin.js
│   ├── package.json
│   ├── README.md
│   └── webpack.config.js
├── .gitignore
├── <npm_package_name>.json
├── MANIFEST.in
├── README.md
├── RELEASE.md
├── setup.cfg
└── setup.py
```

- **`<python_package_name> directory`**\
This directory contains the python package that runs in the kernel

    - **`__init__.py`**\
Marks the `<python_package_name>` directory as a python module, allowing `<python_package_name>` to be imported as a module

    - **`_version.py`**\
Contains python module version definitions

    - **`example.py`**\
Widget class definition in python. Defines widget data model that is synced with front-end automatically using traitlets and Backbone.js

- **`js directory`**\
Source files for widget front-end. Bundled as an npm package\

    - **`lib directory`**\
Directory containing source files

        - **`embed.js`**\
Webpack bundler entry point for generating front-end code bundle. The output of this bundle is used for unpkg distribution.

        - **`example.js`**\
Widget front-end source code. Contains widget model and view class definitions. Widget model is derived from [DOMWidgetModel](https://github.com/jupyter-widgets/ipywidgets/blob/master/packages/base/src/widget.ts) which provides functionality to communicate with the model instance on kernel. Widget view is derived from [DOMWidgetView](https://github.com/jupyter-widgets/ipywidgets/blob/master/packages/base/src/widget.ts) which has a `model` attribute referencing to widget model it is presenting. If a notebook outputs same widget more than once, there is still one model in back-end and one in front-end, only separate views are created.

        - **`extension.js`**\
Contains the javascript that is run when the notebook is loaded. It contains some requirejs configuration and the `load_ipython_extension` which is required for any notebook extension.

        - **`index.js`**\
Webpack bundler entry point for generating front-end code bundle.

        - **`labplugin.js`**\
JupyterLab extension definition for JupyterLab integration. When JpuyterLab loads, it activates the plugin defined in this file. Widget registry service provided by `@jupyter-widgets/jupyterlab-manager` is used during activation to register the widget with JupyterLab.

    - **`package.json`**\
npm package definiton file for widget front-end

    - **`README.md`**\
Auto-generated documentation file for front-end npm package, with installation instructions.

    - **`webpack.config.js`**\
Webpack bundler configuration that defines bundler entry points and ouputs along with other configuration

- **`.gitignore`**\
Ignore rules for widget project git repository.

- **`<npm_package_name>.json`**\
nbextension configuration file used by Jupyter Notebook

- **`MANIFEST.in`**\
setuptools configuration file containing commands to execute (include / exclude files) during installation (pip install).

- **`README.md`**\
Auto-generated documentation file for widget project.

- **`RELEASE.md`**\
Auto-generated documentation file for publishing python package to PyPI and npm package to npm registry.

- **`setup.cfg`**\
Configuration file to mark the python package as a Universal Wheel.

- **`setup.py`**\
Build script for the widget package.

## Local Dev Installation
- `pip install -e .`
- `jupyter nbextension install --py --symlink --sys-prefix <python_package_name>`
- `jupyter nbextension enable --py --sys-prefix <python_package_name>`
- `jupyter labextension install js`
- After making python code changes
    - Restarting kernel will be enough to reflect changes
- After making javascript code changes
    - `cd js`
    - `npm run build`
    - Refresh browser to reflect changes

## Publishing Widget
Follow the steps in (RELEASE.md) to publish widget python package and npm packages.

## Widget Installation Process for Notebook
- `pip install` installs python package for access from kernel
- `nbextension install` copies front-end code files from `/static` directory into `<jupyter path>/nbextensions/<extension_name>`

## Widget Load Process for Notebook
- Python code is loaded into kernel from python package directory
- Front-end javascript code loaded from `<jupyter path>/nbextensions/<extension_name>/extension.js`

## Widget Installation Process for Jupyter Lab
- Notebook installation as above first
- `labextension install` copies npm package into JupyterLab extension staging folder
- Rebuilding JupyterLab integrates widget npm package code into JupyterLab bundle

## Widget Load Process for Jupyter Lab
- Python code is loaded into kernel from python package directory as in notebook
- Front-end javascript code loaded from `labplugin.js` of npm package

## More information

- [Documentation of Jupyter widgets](https://ipywidgets.readthedocs.io/en/latest/)
- Ask questions about using widget-cookiecutter on the Gitter channel
- If you find an issue with widget-cookiecutter or would like to contribute an
  enhancement, [file an issue](https://github.com/jupyter/widget-cookiecutter/issues/new)
  at the widget-cookiecutter GitHub repo.
